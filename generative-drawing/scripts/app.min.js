//! Commands
var commands=function(e){function t(){var e=document.createElement("div");s.appendChild(e);var t=s.getElementsByTagName("canvas");return u.setAttributes(e,{"class":"hidden",id:"zoneClickable",style:"width :"+(t[0].width||0)+"px; height :"+(t[0].height||0)+"px"}),e}function n(e,t){var n=document.createElement("i");u.setAttributes(n,{"class":"fa fa-circle-thin",style:"position : absolute; z-index : 3; line-height : 16px; height : 16px; text-align : center; width :16px; left : "+(e.offsetX-8)+"px; top : "+(e.offsetY-8)+"px;"}),d.appendChild(n),t(e.offsetX,e.offsetY)}function i(e){u.setAttributes(e.target.children[0],{"class":1==e.target.value?"fa fa-eye-slash":"fa fa-eye"}),u.setAttributes(d,{"class":1==e.target.value?"hidden":""}),u.setAttributes(e.target,{value:1==e.target.value?0:1})}function a(e,t){d.innerHTML="",e(t)}function o(e,t,n){var i=Math.round(t[0].noUiSlider.get()),a=Math.round(t[1].noUiSlider.get()),o=Math.round(t[2].noUiSlider.get()),c="rgb("+i+","+a+","+o+")";t[3].style.background=c,n([i,a,o])}var c=[],s=document,r=document,d=null,l={};l={cleanClickZone:a};var u={setContainer:function(e){s=e},setCommandContainer:function(e){r=e},addLabel:function(e){var t=document.createElement("label");return t.innerHTML=e,r.appendChild(t),c.push(t),t},addElement:function(e,t){var n=document.createElement(e);return void 0!=t&&(n.innerHTML=t),r.appendChild(n),c.push(n),n},setAttributes:function(t,n){return e.each(n,function(e,n){t.setAttribute(n,e)}),t},cleanCommands:function(){e.each(c,function(e){r.removeChild(e)}),c=[],d instanceof HTMLElement&&(s.removeChild(d),d=null)},setCommands:function(a){e.each(a.inputs,function(e){if(void 0!==e.label&&this.addLabel(e.label),void 0!==e.type||void 0!==e.options)if("noUiSlider"==e.type){var t=this.addElement("div");noUiSlider.create(t,e.options),t.noUiSlider.on("change",e.action)}else if("color"==e.type){var n=this.addElement("div");n.setAttribute("class","colorPicker");for(var i=["red","green","blue"],a=0;3>a;a++){var c=document.createElement("div");c.setAttribute("class",i[a]),n.appendChild(c)}var s=document.createElement("div");s.setAttribute("class","colorPreview"),n.appendChild(s);for(var a=0;3>a;a++)noUiSlider.create(n.children[a],{start:e["default"][a]||124,connect:"lower",step:1,orientation:"horizontal",range:{min:0,max:255}}),n.children[a].noUiSlider.on("slide",function(t){o(t,n.children,e.action)});o(null,n.children,e.action)}}.bind(this)),e.each(a.buttons,function(e,t){var n=this.addElement("button",e.content||void 0);this.setAttributes(n,e.attr),void 0!=e.cmd?n.addEventListener("click",function(t){l[e.cmd](e.action)}):n.addEventListener("click",e.action)}.bind(this)),e.each(a.specials,function(e,a){if("clickZone"==e.type){d=t(),d.addEventListener("click",function(t){n(t,e.action)});var o=this.addElement("button",'<i class="fa fa-eye-slash"></i> Hotspots');this.setAttributes(o,{value:0}),o.addEventListener("click",function(e){i(e)})}}.bind(this))}};return u}(_),Interface=function(commands){function InterfaceSingleton(options){var options=options||{},_links=options.links||[],_canvasWrapper=options.canvasWrapper||null,_sketch=null,init=function(){_.each(_links,function(e){setLink(e)}),commands.setContainer(options.canvasWrapper),commands.setCommandContainer(options.commandContainer),load(_links[0].getAttribute("href"),function(e){setSketch(e.response)})},setLink=function(e){e.addEventListener("click",function(t){t.preventDefault(),null!==_sketch&&_sketch.remove(),_.each(_links,function(e){classie.remove(e,"selected")}),load(e.getAttribute("href"),function(t){commands.cleanCommands(),setSketch(t.response),classie.add(e,"selected")})})},addLink=function(e){e instanceof HTMLElement&&_links.push(e)},setSketch=function(response){_sketch=new p5(eval(response),options.canvasWrapper),commands.setCommands(_sketch.getCommands())},load=function(e,t){function n(){i.readyState<4||200===i.status&&4===i.readyState&&t(i)}var i;if("undefined"!=typeof XMLHttpRequest)i=new XMLHttpRequest;else for(var a=["MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],o=0,c=a.length;c>o;o++)try{i=new ActiveXObject(a[o]);break}catch(s){}i.onreadystatechange=n,i.open("GET",e,!0),i.send("")};return init(),{name:"Interface",links:_links,canvasWrapper:_canvasWrapper,addLink:addLink}}var instance,_static={name:"Interface",getInstance:function(e){return void 0===instance&&(instance=new InterfaceSingleton(e)),instance}};return _static}(commands),interface;window.onload=function(){interface=Interface.getInstance({links:Array.prototype.slice.call(document.getElementsByTagName("a")),commandContainer:document.getElementById("commandBlock"),canvasWrapper:document.getElementById("canvasWrapper"),commandContainer:document.getElementById("commandBlock")})};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1hbmRzLmpzIiwiaW50ZXJmYWNlLWNsYXNzLmpzIl0sIm5hbWVzIjpbImNvbW1hbmRzIiwiXyIsImFkZFpvbmVDbGlja2FibGUiLCJlbCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsIl9jb250YWluZXIiLCJhcHBlbmRDaGlsZCIsImNhbiIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiY21kIiwic2V0QXR0cmlidXRlcyIsImNsYXNzIiwiaWQiLCJzdHlsZSIsIndpZHRoIiwiaGVpZ2h0IiwiY2xpY2tab25lIiwiZSIsImFjdGlvbiIsImhhbmRsZSIsIm9mZnNldFgiLCJvZmZzZXRZIiwiX3pvbmVDbGlja2FibGUiLCJ0b2dnbGVab25lQ2xpY2thYmxlIiwidGFyZ2V0IiwiY2hpbGRyZW4iLCJ2YWx1ZSIsImNsZWFuQ2xpY2tab25lIiwiY2FsbGJhY2siLCJhcmdzIiwiaW5uZXJIVE1MIiwic2V0Q29sb3IiLCJyIiwiTWF0aCIsInJvdW5kIiwibm9VaVNsaWRlciIsImdldCIsImciLCJiIiwiY29sb3IiLCJiYWNrZ3JvdW5kIiwiX2NvbW1hbmRzIiwiX2NvbW1hbmRzQ29udGFpbmVyIiwiX3JlZ2lzdGVyZWRDbWQiLCJzZXRDb250YWluZXIiLCJzZXRDb21tYW5kQ29udGFpbmVyIiwiYWRkTGFiZWwiLCJsYWJlbCIsInB1c2giLCJhZGRFbGVtZW50IiwidGFnIiwiY29udGVudCIsInVuZGVmaW5lZCIsImF0dHJzIiwiZWFjaCIsIm5hbWUiLCJzZXRBdHRyaWJ1dGUiLCJjbGVhbkNvbW1hbmRzIiwicmVtb3ZlQ2hpbGQiLCJIVE1MRWxlbWVudCIsInNldENvbW1hbmRzIiwib2JqQ29tIiwiaW5wdXRzIiwiaW5wdXQiLCJ0aGlzIiwidHlwZSIsIm9wdGlvbnMiLCJjcmVhdGUiLCJvbiIsIndyYXBwZXIiLCJjb2xvcnMiLCJpIiwicyIsInByZXZpZXciLCJzdGFydCIsImNvbm5lY3QiLCJzdGVwIiwib3JpZW50YXRpb24iLCJyYW5nZSIsIm1pbiIsIm1heCIsImJpbmQiLCJidXR0b25zIiwiYnRuIiwiYXR0ciIsImFkZEV2ZW50TGlzdGVuZXIiLCJzcGVjaWFscyIsInNwZWMiLCJJbnRlcmZhY2UiLCJJbnRlcmZhY2VTaW5nbGV0b24iLCJfbGlua3MiLCJsaW5rcyIsIl9jYW52YXNXcmFwcGVyIiwiY2FudmFzV3JhcHBlciIsIl9za2V0Y2giLCJpbml0Iiwic2V0TGluayIsImNvbW1hbmRDb250YWluZXIiLCJsb2FkIiwiZ2V0QXR0cmlidXRlIiwiZGF0YSIsInNldFNrZXRjaCIsInJlc3BvbnNlIiwibGluayIsInByZXZlbnREZWZhdWx0IiwicmVtb3ZlIiwiY2xhc3NpZSIsImFkZCIsImFkZExpbmsiLCJwNSIsImV2YWwiLCJnZXRDb21tYW5kcyIsInVybCIsImVuc3VyZVJlYWRpbmVzcyIsInhociIsInJlYWR5U3RhdGUiLCJzdGF0dXMiLCJYTUxIdHRwUmVxdWVzdCIsInZlcnNpb25zIiwibGVuIiwibGVuZ3RoIiwiQWN0aXZlWE9iamVjdCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsIm9wZW4iLCJzZW5kIiwiaW5zdGFuY2UiLCJfc3RhdGljIiwiZ2V0SW5zdGFuY2UiLCJpbnRlcmZhY2UiLCJ3aW5kb3ciLCJvbmxvYWQiLCJBcnJheSIsInByb3RvdHlwZSIsInNsaWNlIiwiY2FsbCIsImdldEVsZW1lbnRCeUlkIl0sIm1hcHBpbmdzIjoiO0FBQ0EsR0FBQUEsVUFBQSxTQUFBQyxHQVdBLFFBQUFDLEtBQ0EsR0FBQUMsR0FBQUMsU0FBQUMsY0FBQSxNQUNBQyxHQUFBQyxZQUFBSixFQUNBLElBQUFLLEdBQUFGLEVBQUFHLHFCQUFBLFNBRUEsT0FEQUMsR0FBQUMsY0FBQVIsR0FBQVMsUUFBQSxTQUFBQyxHQUFBLGdCQUFBQyxNQUFBLFdBQUFOLEVBQUEsR0FBQU8sT0FBQSxHQUFBLGdCQUFBUCxFQUFBLEdBQUFRLFFBQUEsR0FBQSxPQUNBYixFQUdBLFFBQUFjLEdBQUFDLEVBQUFDLEdBQ0EsR0FBQUMsR0FBQWhCLFNBQUFDLGNBQUEsSUFDQUssR0FBQUMsY0FBQVMsR0FDQVIsUUFBQSxvQkFDQUUsTUFBQSxrSEFBQUksRUFBQUcsUUFBQSxHQUFBLGNBQUFILEVBQUFJLFFBQUEsR0FBQSxRQUVBQyxFQUFBaEIsWUFBQWEsR0FDQUQsRUFBQUQsRUFBQUcsUUFBQUgsRUFBQUksU0FHQSxRQUFBRSxHQUFBTixHQUNBUixFQUFBQyxjQUFBTyxFQUFBTyxPQUFBQyxTQUFBLElBQUFkLFFBQUEsR0FBQU0sRUFBQU8sT0FBQUUsTUFBQSxrQkFBQSxjQUNBakIsRUFBQUMsY0FBQVksR0FBQVgsUUFBQSxHQUFBTSxFQUFBTyxPQUFBRSxNQUFBLFNBQUEsS0FDQWpCLEVBQUFDLGNBQUFPLEVBQUFPLFFBQUFFLE1BQUEsR0FBQVQsRUFBQU8sT0FBQUUsTUFBQSxFQUFBLElBR0EsUUFBQUMsR0FBQUMsRUFBQUMsR0FDQVAsRUFBQVEsVUFBQSxHQUNBRixFQUFBQyxHQUdBLFFBQUFFLEdBQUFkLEVBQUFRLEVBQUFHLEdBSUEsR0FBQUksR0FBQUMsS0FBQUMsTUFBQVQsRUFBQSxHQUFBVSxXQUFBQyxPQUNBQyxFQUFBSixLQUFBQyxNQUFBVCxFQUFBLEdBQUFVLFdBQUFDLE9BQ0FFLEVBQUFMLEtBQUFDLE1BQUFULEVBQUEsR0FBQVUsV0FBQUMsT0FDQUcsRUFBQSxPQUFBUCxFQUFBLElBQUFLLEVBQUEsSUFBQUMsRUFBQSxHQUVBYixHQUFBLEdBQUFaLE1BQUEyQixXQUFBRCxFQUNBWCxHQUFBSSxFQUFBSyxFQUFBQyxJQWhEQSxHQUFBRyxNQUNBcEMsRUFBQUYsU0FDQXVDLEVBQUF2QyxTQUNBbUIsRUFBQSxLQUNBcUIsSUErQ0FBLElBQUFoQixlQUFBQSxFQUlBLElBQUFsQixJQUNBbUMsYUFBQSxTQUFBMUMsR0FDQUcsRUFBQUgsR0FFQTJDLG9CQUFBLFNBQUEzQyxHQUNBd0MsRUFBQXhDLEdBRUE0QyxTQUFBLFNBQUFDLEdBQ0EsR0FBQTdDLEdBQUFDLFNBQUFDLGNBQUEsUUFJQSxPQUhBRixHQUFBNEIsVUFBQWlCLEVBQ0FMLEVBQUFwQyxZQUFBSixHQUNBdUMsRUFBQU8sS0FBQTlDLEdBQ0FBLEdBRUErQyxXQUFBLFNBQUFDLEVBQUFDLEdBQ0EsR0FBQWpELEdBQUFDLFNBQUFDLGNBQUE4QyxFQUlBLE9BSEFFLFNBQUFELElBQUFqRCxFQUFBNEIsVUFBQXFCLEdBQ0FULEVBQUFwQyxZQUFBSixHQUNBdUMsRUFBQU8sS0FBQTlDLEdBQ0FBLEdBRUFRLGNBQUEsU0FBQVIsRUFBQW1ELEdBSUEsTUFIQXJELEdBQUFzRCxLQUFBRCxFQUFBLFNBQUEzQixFQUFBNkIsR0FDQXJELEVBQUFzRCxhQUFBRCxFQUFBN0IsS0FFQXhCLEdBRUF1RCxjQUFBLFdBQ0F6RCxFQUFBc0QsS0FBQWIsRUFBQSxTQUFBdkMsR0FDQXdDLEVBQUFnQixZQUFBeEQsS0FFQXVDLEtBQ0FuQixZQUFBcUMsZUFDQXRELEVBQUFxRCxZQUFBcEMsR0FDQUEsRUFBQSxPQUdBc0MsWUFBQSxTQUFBQyxHQUNBN0QsRUFBQXNELEtBQUFPLEVBQUFDLE9BQUEsU0FBQUMsR0FFQSxHQURBWCxTQUFBVyxFQUFBaEIsT0FBQWlCLEtBQUFsQixTQUFBaUIsRUFBQWhCLE9BQ0FLLFNBQUFXLEVBQUFFLE1BQUFiLFNBQUFXLEVBQUFHLFFBQ0EsR0FBQSxjQUFBSCxFQUFBRSxLQUFBLENBQ0EsR0FBQS9ELEdBQUE4RCxLQUFBZixXQUFBLE1BQ0FkLFlBQUFnQyxPQUFBakUsRUFBQTZELEVBQUFHLFNBQ0FoRSxFQUFBaUMsV0FBQWlDLEdBQUEsU0FBQUwsRUFBQTdDLFlBRUEsSUFBQSxTQUFBNkMsRUFBQUUsS0FBQSxDQUNBLEdBQUFJLEdBQUFMLEtBQUFmLFdBQUEsTUFDQW9CLEdBQUFiLGFBQUEsUUFBQSxjQUdBLEtBQUEsR0FEQWMsSUFBQSxNQUFBLFFBQUEsUUFDQUMsRUFBQSxFQUFBLEVBQUFBLEVBQUFBLElBQUEsQ0FDQSxHQUFBQyxHQUFBckUsU0FBQUMsY0FBQSxNQUNBb0UsR0FBQWhCLGFBQUEsUUFBQWMsRUFBQUMsSUFDQUYsRUFBQS9ELFlBQUFrRSxHQUdBLEdBQUFDLEdBQUF0RSxTQUFBQyxjQUFBLE1BQ0FxRSxHQUFBakIsYUFBQSxRQUFBLGdCQUNBYSxFQUFBL0QsWUFBQW1FLEVBRUEsS0FBQSxHQUFBRixHQUFBLEVBQUEsRUFBQUEsRUFBQUEsSUFDQXBDLFdBQUFnQyxPQUFBRSxFQUFBNUMsU0FBQThDLElBQ0FHLE1BQUFYLEVBQUFBLFdBQUFRLElBQUEsSUFDQUksUUFBQSxRQUNBQyxLQUFBLEVBQ0FDLFlBQUEsYUFDQUMsT0FDQUMsSUFBQSxFQUNBQyxJQUFBLE9BR0FYLEVBQUE1QyxTQUFBOEMsR0FBQXBDLFdBQUFpQyxHQUFBLFFBQUEsU0FBQW5ELEdBQ0FjLEVBQUFkLEVBQUFvRCxFQUFBNUMsU0FBQXNDLEVBQUE3QyxTQUdBYSxHQUFBLEtBQUFzQyxFQUFBNUMsU0FBQXNDLEVBQUE3QyxVQUdBK0QsS0FBQWpCLE9BRUFoRSxFQUFBc0QsS0FBQU8sRUFBQXFCLFFBQUEsU0FBQUMsRUFBQTVCLEdBQ0EsR0FBQXJELEdBQUE4RCxLQUFBZixXQUFBLFNBQUFrQyxFQUFBaEMsU0FBQUMsT0FDQVksTUFBQXRELGNBQUFSLEVBQUFpRixFQUFBQyxNQUNBaEMsUUFBQStCLEVBQUExRSxJQUNBUCxFQUFBbUYsaUJBQUEsUUFBQSxTQUFBcEUsR0FDQTBCLEVBQUF3QyxFQUFBMUUsS0FBQTBFLEVBQUFqRSxVQUdBaEIsRUFBQW1GLGlCQUFBLFFBQUFGLEVBQUFqRSxTQUVBK0QsS0FBQWpCLE9BRUFoRSxFQUFBc0QsS0FBQU8sRUFBQXlCLFNBQUEsU0FBQUMsRUFBQWhDLEdBQ0EsR0FBQSxhQUFBZ0MsRUFBQXRCLEtBQUEsQ0FDQTNDLEVBQUFyQixJQUNBcUIsRUFBQStELGlCQUFBLFFBQUEsU0FBQXBFLEdBQ0FELEVBQUFDLEVBQUFzRSxFQUFBckUsU0FHQSxJQUFBaEIsR0FBQThELEtBQUFmLFdBQUEsU0FBQSwyQ0FDQWUsTUFBQXRELGNBQUFSLEdBQUF3QixNQUFBLElBQ0F4QixFQUFBbUYsaUJBQUEsUUFBQSxTQUFBcEUsR0FDQU0sRUFBQU4sT0FHQWdFLEtBQUFqQixRQUlBLE9BQUF2RCxJQUNBVCxHQ3ZLQXdGLFVBQUEsU0FBQXpGLFVBRUEsUUFBQTBGLG9CQUFBdkIsU0FDQSxHQUFBQSxTQUFBQSxZQUNBd0IsT0FBQXhCLFFBQUF5QixVQUNBQyxlQUFBMUIsUUFBQTJCLGVBQUEsS0FDQUMsUUFBQSxLQUVBQyxLQUFBLFdBQ0EvRixFQUFBc0QsS0FBQW9DLE9BQUEsU0FBQXhGLEdBQUE4RixRQUFBOUYsS0FDQUgsU0FBQTZDLGFBQUFzQixRQUFBMkIsZUFDQTlGLFNBQUE4QyxvQkFBQXFCLFFBQUErQixrQkFDQUMsS0FBQVIsT0FBQSxHQUFBUyxhQUFBLFFBQUEsU0FBQUMsR0FBQUMsVUFBQUQsRUFBQUUsYUFHQU4sUUFBQSxTQUFBTyxHQUNBQSxFQUFBbEIsaUJBQUEsUUFBQSxTQUFBcEUsR0FDQUEsRUFBQXVGLGlCQUNBLE9BQUFWLFNBQUFBLFFBQUFXLFNBRUF6RyxFQUFBc0QsS0FBQW9DLE9BQUEsU0FBQXhGLEdBQUF3RyxRQUFBRCxPQUFBdkcsRUFBQSxjQUNBZ0csS0FBQUssRUFBQUosYUFBQSxRQUFBLFNBQUFDLEdBQ0FyRyxTQUFBMEQsZ0JBQ0E0QyxVQUFBRCxFQUFBRSxVQUNBSSxRQUFBQyxJQUFBSixFQUFBLGlCQU1BSyxRQUFBLFNBQUFMLEdBQ0FBLFlBQUE1QyxjQUFBK0IsT0FBQTFDLEtBQUF1RCxJQUdBRixVQUFBLFNBQUFDLFVBQ0FSLFFBQUEsR0FBQWUsSUFBQUMsS0FBQVIsVUFBQXBDLFFBQUEyQixlQUNBOUYsU0FBQTZELFlBQUFrQyxRQUFBaUIsZ0JBR0FiLEtBQUEsU0FBQWMsRUFBQXBGLEdBc0JBLFFBQUFxRixLQUNBQyxFQUFBQyxXQUFBLEdBQ0EsTUFBQUQsRUFBQUUsUUFDQSxJQUFBRixFQUFBQyxZQUFBdkYsRUFBQXNGLEdBeEJBLEdBQUFBLEVBRUEsSUFBQSxtQkFBQUcsZ0JBQUFILEVBQUEsR0FBQUcsb0JBUUEsS0FBQSxHQU5BQyxJQUFBLHFCQUNBLHFCQUNBLHFCQUNBLHFCQUNBLHFCQUVBL0MsRUFBQSxFQUFBZ0QsRUFBQUQsRUFBQUUsT0FBQUQsRUFBQWhELEVBQUFBLElBQ0EsSUFDQTJDLEVBQUEsR0FBQU8sZUFBQUgsRUFBQS9DLEdBQ0EsT0FFQSxNQUFBdEQsSUFJQWlHLEVBQUFRLG1CQUFBVCxFQVFBQyxFQUFBUyxLQUFBLE1BQUFYLEdBQUEsR0FDQUUsRUFBQVUsS0FBQSxJQUtBLE9BRkE3QixTQUdBeEMsS0FBQSxZQUNBb0MsTUFBQUQsT0FDQUcsY0FBQUQsZUFDQWdCLFFBQUFBLFNBS0EsR0FBQWlCLFVBRUFDLFNBRUF2RSxLQUFBLFlBQ0F3RSxZQUFBLFNBQUE3RCxHQUtBLE1BSkFkLFVBQUF5RSxXQUNBQSxTQUFBLEdBQUFwQyxvQkFBQXZCLElBR0EyRCxVQUlBLE9BQUFDLFVBRUEvSCxVQUVBaUksU0FFQUMsUUFBQUMsT0FBQSxXQUNBRixVQUFBeEMsVUFBQXVDLGFBQ0FwQyxNQUFBd0MsTUFBQUMsVUFBQUMsTUFBQUMsS0FBQW5JLFNBQUFLLHFCQUFBLE1BQ0F5RixpQkFBQTlGLFNBQUFvSSxlQUFBLGdCQUNBMUMsY0FBQTFGLFNBQUFvSSxlQUFBLGlCQUNBdEMsaUJBQUE5RixTQUFBb0ksZUFBQSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8hIENvbW1hbmRzXHJcbnZhciBjb21tYW5kcyA9IChmdW5jdGlvbihfKXtcclxuXHJcblx0dmFyIF9jb21tYW5kcyAgICAgICA9IFtdXHJcblx0LF9jb250YWluZXIgICAgICAgICA9IGRvY3VtZW50XHJcblx0LF9jb21tYW5kc0NvbnRhaW5lciA9IGRvY3VtZW50XHJcblx0LF96b25lQ2xpY2thYmxlICAgICA9IG51bGxcclxuXHQsX3JlZ2lzdGVyZWRDbWRcdFx0PSB7fTtcclxuXHJcblx0LyogUFJJVkFURVxyXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcblx0ZnVuY3Rpb24gYWRkWm9uZUNsaWNrYWJsZSAoKXtcclxuXHRcdHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0X2NvbnRhaW5lci5hcHBlbmRDaGlsZChlbCk7XHJcblx0XHR2YXIgY2FuID0gX2NvbnRhaW5lci5nZXRFbGVtZW50c0J5VGFnTmFtZSgnY2FudmFzJyk7XHJcblx0XHRjbWQuc2V0QXR0cmlidXRlcyhlbCwgeyAnY2xhc3MnOidoaWRkZW4nLCBpZDonem9uZUNsaWNrYWJsZScsIHN0eWxlIDogJ3dpZHRoIDonICsgKGNhblswXS53aWR0aCB8fCAwKSArJ3B4OyBoZWlnaHQgOicgKyAoY2FuWzBdLmhlaWdodCB8fCAwKSArICdweCd9KTtcclxuXHRcdHJldHVybiBlbDtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGNsaWNrWm9uZShlLGFjdGlvbil7XHJcblx0ICAgIHZhciBoYW5kbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XHJcblx0ICAgIGNtZC5zZXRBdHRyaWJ1dGVzKGhhbmRsZSx7XHJcblx0ICAgIFx0Y2xhc3MgOiAnZmEgZmEtY2lyY2xlLXRoaW4nXHJcblx0ICAgIFx0LHN0eWxlIDogJ3Bvc2l0aW9uIDogYWJzb2x1dGU7IHotaW5kZXggOiAzOyBsaW5lLWhlaWdodCA6IDE2cHg7IGhlaWdodCA6IDE2cHg7IHRleHQtYWxpZ24gOiBjZW50ZXI7IHdpZHRoIDoxNnB4OyBsZWZ0IDogJyArIChlLm9mZnNldFgtOCkgKyAncHg7IHRvcCA6ICcgKyAoZS5vZmZzZXRZLTgpICsgJ3B4OydcclxuXHQgICAgfSlcclxuXHQgICAgX3pvbmVDbGlja2FibGUuYXBwZW5kQ2hpbGQoaGFuZGxlKTtcclxuXHQgICAgYWN0aW9uKGUub2Zmc2V0WCxlLm9mZnNldFkpO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gdG9nZ2xlWm9uZUNsaWNrYWJsZShlKXtcclxuXHRcdGNtZC5zZXRBdHRyaWJ1dGVzKGUudGFyZ2V0LmNoaWxkcmVuWzBdLCB7IGNsYXNzIDogKGUudGFyZ2V0LnZhbHVlID09IDEpID8gJ2ZhIGZhLWV5ZS1zbGFzaCcgOiAnZmEgZmEtZXllJyB9KTtcclxuXHRcdGNtZC5zZXRBdHRyaWJ1dGVzKF96b25lQ2xpY2thYmxlLCB7IGNsYXNzIDogKGUudGFyZ2V0LnZhbHVlID09IDEpID8gJ2hpZGRlbicgOiAnJyB9KTtcclxuXHRcdGNtZC5zZXRBdHRyaWJ1dGVzKGUudGFyZ2V0LCB7IHZhbHVlIDogKGUudGFyZ2V0LnZhbHVlID09IDEpID8gMCA6IDEgfSk7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBjbGVhbkNsaWNrWm9uZShjYWxsYmFjayxhcmdzKXtcclxuXHQgICAgX3pvbmVDbGlja2FibGUuaW5uZXJIVE1MID0gJyc7XHJcblx0ICAgIGNhbGxiYWNrKGFyZ3MpO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gc2V0Q29sb3IoZSxjaGlsZHJlbixjYWxsYmFjayl7XHJcblxyXG5cdFx0Ly8gR2V0IHRoZSBzbGlkZXIgdmFsdWVzLFxyXG5cdFx0Ly8gc3RpY2sgdGhlbSB0b2dldGhlci5cclxuXHRcdHZhciByID0gTWF0aC5yb3VuZChjaGlsZHJlblswXS5ub1VpU2xpZGVyLmdldCgpKTtcclxuXHRcdHZhciBnID0gTWF0aC5yb3VuZChjaGlsZHJlblsxXS5ub1VpU2xpZGVyLmdldCgpKTtcclxuXHRcdHZhciBiID0gTWF0aC5yb3VuZChjaGlsZHJlblsyXS5ub1VpU2xpZGVyLmdldCgpKTtcclxuXHRcdHZhciBjb2xvciA9ICdyZ2IoJyArIHIgKyAnLCcgKyBnICsgJywnICsgYiArICcpJztcclxuXHJcblx0XHRjaGlsZHJlblszXS5zdHlsZS5iYWNrZ3JvdW5kID0gY29sb3I7XHJcblx0XHRjYWxsYmFjayhbcixnLGJdKTtcclxuXHR9XHJcblxyXG5cdF9yZWdpc3RlcmVkQ21kID0geyAnY2xlYW5DbGlja1pvbmUnIDogY2xlYW5DbGlja1pvbmUgfVxyXG5cclxuXHQvKiBQVUJMSUNcclxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblx0dmFyIGNtZCA9IHtcclxuXHRcdHNldENvbnRhaW5lciA6IGZ1bmN0aW9uKGVsKXtcclxuXHRcdFx0X2NvbnRhaW5lciA9IGVsO1xyXG5cdFx0fVxyXG5cdFx0LHNldENvbW1hbmRDb250YWluZXIgOiBmdW5jdGlvbihlbCl7XHJcblx0XHRcdF9jb21tYW5kc0NvbnRhaW5lciA9IGVsO1xyXG5cdFx0fVxyXG5cdFx0LGFkZExhYmVsIDogZnVuY3Rpb24obGFiZWwpe1xyXG5cdFx0XHR2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xyXG5cdFx0XHRlbC5pbm5lckhUTUwgPSBsYWJlbDtcclxuXHRcdFx0X2NvbW1hbmRzQ29udGFpbmVyLmFwcGVuZENoaWxkKGVsKTtcclxuXHRcdFx0X2NvbW1hbmRzLnB1c2goZWwpO1xyXG5cdFx0XHRyZXR1cm4gZWw7XHJcblx0XHR9XHJcblx0XHQsYWRkRWxlbWVudCA6IGZ1bmN0aW9uKHRhZyxjb250ZW50KXtcclxuXHRcdFx0dmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xyXG5cdFx0XHRpZihjb250ZW50ICE9IHVuZGVmaW5lZCkgZWwuaW5uZXJIVE1MID0gY29udGVudDtcclxuXHRcdFx0X2NvbW1hbmRzQ29udGFpbmVyLmFwcGVuZENoaWxkKGVsKTtcclxuXHRcdFx0X2NvbW1hbmRzLnB1c2goZWwpO1xyXG5cdFx0XHRyZXR1cm4gZWw7XHJcblx0XHR9XHJcblx0XHQsc2V0QXR0cmlidXRlcyA6IGZ1bmN0aW9uKGVsLGF0dHJzKXtcclxuXHRcdFx0Xy5lYWNoKGF0dHJzLCBmdW5jdGlvbih2YWx1ZSxuYW1lKXsgXHJcblx0XHRcdFx0ZWwuc2V0QXR0cmlidXRlKG5hbWUsdmFsdWUpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0cmV0dXJuIGVsO1xyXG5cdFx0fVxyXG5cdFx0LGNsZWFuQ29tbWFuZHMgOiBmdW5jdGlvbigpe1xyXG5cdFx0XHRfLmVhY2goX2NvbW1hbmRzLCBmdW5jdGlvbihlbCl7XHJcblx0XHRcdFx0X2NvbW1hbmRzQ29udGFpbmVyLnJlbW92ZUNoaWxkKGVsKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdF9jb21tYW5kcyA9IFtdO1xyXG5cdFx0XHRpZihfem9uZUNsaWNrYWJsZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KXtcclxuXHRcdFx0XHRfY29udGFpbmVyLnJlbW92ZUNoaWxkKF96b25lQ2xpY2thYmxlKTtcclxuXHRcdFx0XHRfem9uZUNsaWNrYWJsZSA9IG51bGw7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdCxzZXRDb21tYW5kcyA6IGZ1bmN0aW9uKG9iakNvbSl7XHJcblx0XHRcdF8uZWFjaChvYmpDb20uaW5wdXRzLCBmdW5jdGlvbihpbnB1dCl7IFxyXG5cdFx0XHRcdGlmKGlucHV0LmxhYmVsICE9PSB1bmRlZmluZWQpIHRoaXMuYWRkTGFiZWwoaW5wdXQubGFiZWwpO1xyXG5cdCAgICBcdFx0aWYoaW5wdXQudHlwZSAhPT0gdW5kZWZpbmVkIHx8IGlucHV0Lm9wdGlvbnMgIT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoaW5wdXQudHlwZSA9PSAnbm9VaVNsaWRlcicpe1xyXG4gICAgICAgICAgICAgICAgICAgIFx0dmFyIGVsID0gdGhpcy5hZGRFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9VaVNsaWRlci5jcmVhdGUoZWwsIGlucHV0Lm9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5ub1VpU2xpZGVyLm9uKCdjaGFuZ2UnLCBpbnB1dC5hY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihpbnB1dC50eXBlID09ICdjb2xvcicpe1xyXG5cdFx0XHRcdFx0XHR2YXIgd3JhcHBlciA9IHRoaXMuYWRkRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdFx0XHRcdHdyYXBwZXIuc2V0QXR0cmlidXRlKCdjbGFzcycsJ2NvbG9yUGlja2VyJyk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHR2YXIgY29sb3JzID1bJ3JlZCcsJ2dyZWVuJywnYmx1ZSddO1xyXG5cdFx0XHRcdFx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPCAzOyBpKysgKSB7XHJcblx0XHRcdFx0XHRcdFx0dmFyIHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdFx0XHRcdFx0XHRzLnNldEF0dHJpYnV0ZSgnY2xhc3MnLGNvbG9yc1tpXSk7XHJcblx0XHRcdFx0XHRcdFx0d3JhcHBlci5hcHBlbmRDaGlsZChzKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0dmFyIHByZXZpZXcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdFx0XHRcdFx0cHJldmlldy5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywnY29sb3JQcmV2aWV3Jyk7XHJcblx0XHRcdFx0XHRcdHdyYXBwZXIuYXBwZW5kQ2hpbGQocHJldmlldyk7XHJcblxyXG5cdFx0XHRcdFx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPCAzOyBpKysgKSB7XHJcblx0XHRcdFx0XHRcdFx0bm9VaVNsaWRlci5jcmVhdGUod3JhcHBlci5jaGlsZHJlbltpXSwge1xyXG5cdFx0XHRcdFx0XHRcdFx0c3RhcnQgICAgICAgIDogaW5wdXQuZGVmYXVsdFtpXSB8fCAxMjRcclxuXHRcdFx0XHRcdFx0XHRcdCxjb25uZWN0ICAgICA6IFwibG93ZXJcIlxyXG5cdFx0XHRcdFx0XHRcdFx0LHN0ZXAgICAgICAgIDogMVxyXG5cdFx0XHRcdFx0XHRcdFx0LG9yaWVudGF0aW9uIDogXCJob3Jpem9udGFsXCJcclxuXHRcdFx0XHRcdFx0XHRcdCxyYW5nZSAgICAgICA6IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0J21pbicgIDogMFxyXG5cdFx0XHRcdFx0XHRcdFx0XHQsJ21heCcgOiAyNTVcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHR3cmFwcGVyLmNoaWxkcmVuW2ldLm5vVWlTbGlkZXIub24oJ3NsaWRlJywgZnVuY3Rpb24oZSl7IFxyXG5cdFx0XHRcdFx0XHRcdFx0c2V0Q29sb3IoZSwgd3JhcHBlci5jaGlsZHJlbiwgaW5wdXQuYWN0aW9uKTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRzZXRDb2xvcihudWxsLCB3cmFwcGVyLmNoaWxkcmVuLCBpbnB1dC5hY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgXHR9XHJcbiAgICAgICAgICAgICAgICB9XHJcblx0ICAgIFx0fS5iaW5kKHRoaXMpKTtcclxuXHJcblx0ICAgIFx0Xy5lYWNoKG9iakNvbS5idXR0b25zLCBmdW5jdGlvbihidG4sbmFtZSl7IFxyXG4gICAgICAgICAgICAgICAgdmFyIGVsID0gdGhpcy5hZGRFbGVtZW50KCdidXR0b24nLCBidG4uY29udGVudCB8fCB1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGVzKGVsLGJ0bi5hdHRyKTtcclxuICAgICAgICAgICAgICAgIGlmKGJ0bi5jbWQgIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICAgIFx0ZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgICAgIFx0XHRfcmVnaXN0ZXJlZENtZFtidG4uY21kXShidG4uYWN0aW9uKTtcclxuICAgICAgICAgICAgICAgIFx0fSk7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIFx0ZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBidG4uYWN0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgICAgIF8uZWFjaChvYmpDb20uc3BlY2lhbHMsIGZ1bmN0aW9uKHNwZWMsbmFtZSl7IFxyXG4gICAgICAgICAgICAgICAgaWYoc3BlYy50eXBlID09ICdjbGlja1pvbmUnKXtcclxuICAgICAgICAgICAgXHRcdF96b25lQ2xpY2thYmxlID0gYWRkWm9uZUNsaWNrYWJsZSgpO1xyXG4gICAgICAgICAgICBcdFx0X3pvbmVDbGlja2FibGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKXsgXHJcbiAgICAgICAgICAgIFx0XHRcdGNsaWNrWm9uZShlLCBzcGVjLmFjdGlvbik7XHJcbiAgICAgICAgICAgIFx0XHR9KTtcclxuXHJcbiAgICAgICAgICAgIFx0XHR2YXIgZWwgPSB0aGlzLmFkZEVsZW1lbnQoJ2J1dHRvbicsJzxpIGNsYXNzPVwiZmEgZmEtZXllLXNsYXNoXCI+PC9pPiBIb3RzcG90cycpO1xyXG4gICAgICAgICAgICBcdFx0dGhpcy5zZXRBdHRyaWJ1dGVzKGVsLHt2YWx1ZSA6IDAgfSk7XHJcbiAgICAgICAgICAgIFx0XHRlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgIFx0XHRcdHRvZ2dsZVpvbmVDbGlja2FibGUoZSk7XHJcbiAgICAgICAgICAgIFx0XHR9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHJldHVybiBjbWQ7XHJcbn0oXykpOyIsIi8vISBJbnRlcmZhY2VcclxuXHJcbnZhciBJbnRlcmZhY2UgPSAoZnVuY3Rpb24gKGNvbW1hbmRzKSB7XHJcblxyXG5cdGZ1bmN0aW9uIEludGVyZmFjZVNpbmdsZXRvbihvcHRpb25zKXtcclxuXHRcdHZhciBvcHRpb25zICAgICA9IG9wdGlvbnMgfHwge31cclxuXHRcdCxfbGlua3MgICAgICAgICA9IG9wdGlvbnMubGlua3MgfHwgW11cclxuXHRcdCxfY2FudmFzV3JhcHBlciA9IG9wdGlvbnMuY2FudmFzV3JhcHBlciB8fCBudWxsXHJcblx0XHQsX3NrZXRjaCAgICAgICAgID0gbnVsbFxyXG5cclxuXHRcdCxpbml0ID0gZnVuY3Rpb24gKCl7XHJcblx0XHRcdF8uZWFjaChfbGlua3MsIGZ1bmN0aW9uKGVsKXsgc2V0TGluayhlbCkgfSk7XHJcblx0XHRcdGNvbW1hbmRzLnNldENvbnRhaW5lcihvcHRpb25zLmNhbnZhc1dyYXBwZXIpO1xyXG5cdFx0XHRjb21tYW5kcy5zZXRDb21tYW5kQ29udGFpbmVyKG9wdGlvbnMuY29tbWFuZENvbnRhaW5lcik7XHJcblx0XHRcdGxvYWQoX2xpbmtzWzBdLmdldEF0dHJpYnV0ZSgnaHJlZicpLCBmdW5jdGlvbihkYXRhKXsgc2V0U2tldGNoKGRhdGEucmVzcG9uc2UpOyB9KTtcclxuXHRcdH1cclxuXHJcblx0XHQsc2V0TGluayA9IGZ1bmN0aW9uIChsaW5rKXtcclxuXHRcdFx0bGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZnVuY3Rpb24oZSl7XHJcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdGlmKF9za2V0Y2ggIT09IG51bGwpIF9za2V0Y2gucmVtb3ZlKCk7XHJcblxyXG5cdFx0XHRcdF8uZWFjaChfbGlua3MsIGZ1bmN0aW9uKGVsKXsgY2xhc3NpZS5yZW1vdmUoIGVsLCAnc2VsZWN0ZWQnICkgfSk7XHJcblx0XHRcdFx0bG9hZChsaW5rLmdldEF0dHJpYnV0ZSgnaHJlZicpLCBmdW5jdGlvbihkYXRhKXsgXHJcblx0XHRcdFx0XHRjb21tYW5kcy5jbGVhbkNvbW1hbmRzKCk7XHJcblx0XHRcdFx0XHRzZXRTa2V0Y2goZGF0YS5yZXNwb25zZSk7XHJcblx0XHRcdFx0XHRjbGFzc2llLmFkZCggbGluaywgJ3NlbGVjdGVkJyApO1xyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0LGFkZExpbmsgPSBmdW5jdGlvbiAobGluayl7XHJcblx0XHRcdGlmKGxpbmsgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkgX2xpbmtzLnB1c2gobGluayk7XHJcblx0XHR9XHJcblxyXG5cdFx0LHNldFNrZXRjaCA9IGZ1bmN0aW9uIChyZXNwb25zZSl7XHJcblx0XHRcdF9za2V0Y2ggPSBuZXcgcDUoZXZhbChyZXNwb25zZSksb3B0aW9ucy5jYW52YXNXcmFwcGVyKTtcclxuXHRcdFx0Y29tbWFuZHMuc2V0Q29tbWFuZHMoX3NrZXRjaC5nZXRDb21tYW5kcygpKTtcclxuXHRcdH1cclxuXHJcblx0XHQsbG9hZCA9IGZ1bmN0aW9uICh1cmwsIGNhbGxiYWNrKSB7XHJcblx0XHRcdHZhciB4aHI7XHJcblxyXG5cdFx0XHRpZih0eXBlb2YgWE1MSHR0cFJlcXVlc3QgIT09ICd1bmRlZmluZWQnKSB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0dmFyIHZlcnNpb25zID0gW1wiTVNYTUwyLlhtbEh0dHAuNS4wXCIsIFxyXG5cdFx0XHRcdFwiTVNYTUwyLlhtbEh0dHAuNC4wXCIsXHJcblx0XHRcdFx0XCJNU1hNTDIuWG1sSHR0cC4zLjBcIiwgXHJcblx0XHRcdFx0XCJNU1hNTDIuWG1sSHR0cC4yLjBcIixcclxuXHRcdFx0XHRcIk1pY3Jvc29mdC5YbWxIdHRwXCJdXHJcblxyXG5cdFx0XHRcdGZvcih2YXIgaSA9IDAsIGxlbiA9IHZlcnNpb25zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcblx0XHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0XHR4aHIgPSBuZXcgQWN0aXZlWE9iamVjdCh2ZXJzaW9uc1tpXSk7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Y2F0Y2goZSl7fVxyXG5cdFx0XHQgICAgfSAvLyBlbmQgZm9yXHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBlbnN1cmVSZWFkaW5lc3M7XHJcblxyXG5cdFx0XHRmdW5jdGlvbiBlbnN1cmVSZWFkaW5lc3MoKSB7XHJcblx0XHRcdFx0aWYoeGhyLnJlYWR5U3RhdGUgPCA0KSByZXR1cm47XHJcblx0XHRcdFx0aWYoeGhyLnN0YXR1cyAhPT0gMjAwKSByZXR1cm47XHJcblx0XHRcdFx0aWYoeGhyLnJlYWR5U3RhdGUgPT09IDQpIGNhbGxiYWNrKHhocik7ICAgICAgICAgIFxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR4aHIub3BlbignR0VUJywgdXJsLCB0cnVlKTtcclxuXHRcdFx0eGhyLnNlbmQoJycpO1xyXG5cdFx0fTtcclxuXHJcblx0XHRpbml0KCk7XHJcblxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0bmFtZSAgICAgICAgICAgOiAnSW50ZXJmYWNlJ1xyXG5cdFx0XHQsbGlua3MgICAgICAgICA6IF9saW5rc1xyXG5cdFx0XHQsY2FudmFzV3JhcHBlciA6IF9jYW52YXNXcmFwcGVyXHJcblx0XHRcdCxhZGRMaW5rXHQ6IGFkZExpbmtcclxuXHRcdH1cclxuXHJcblx0fVxyXG5cclxuXHR2YXIgaW5zdGFuY2U7XHJcblxyXG5cdHZhciBfc3RhdGljID0ge1xyXG5cclxuXHRcdG5hbWU6ICdJbnRlcmZhY2UnLFxyXG5cdCAgICBnZXRJbnN0YW5jZTogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0ICAgIFx0aWYoIGluc3RhbmNlID09PSB1bmRlZmluZWQgKSB7XHJcblx0ICAgIFx0XHRpbnN0YW5jZSA9IG5ldyBJbnRlcmZhY2VTaW5nbGV0b24oIG9wdGlvbnMgKTtcclxuXHJcblx0ICAgIFx0fVxyXG5cdCAgICBcdHJldHVybiBpbnN0YW5jZTtcclxuXHQgICAgfVxyXG5cdH07XHJcblxyXG5cdHJldHVybiBfc3RhdGljO1xyXG5cclxufSkoY29tbWFuZHMpO1xyXG5cclxudmFyIGludGVyZmFjZTtcclxuXHJcbndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbigpe1xyXG5cdGludGVyZmFjZSA9IEludGVyZmFjZS5nZXRJbnN0YW5jZSh7XHJcblx0XHRsaW5rczogQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdhJykgKVxyXG5cdFx0LGNvbW1hbmRDb250YWluZXI6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21tYW5kQmxvY2snKVxyXG5cdFx0LGNhbnZhc1dyYXBwZXI6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXNXcmFwcGVyJylcclxuXHRcdCxjb21tYW5kQ29udGFpbmVyIDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbW1hbmRCbG9jaycpXHJcblx0fSk7XHJcbn0iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=